Разработка через тестирование сводится к следующим действиям.

1. Создание набора тестов, прохождение которых позволяет перейти к рефакторингу кода и предполагает его последующее развертывание. То есть успешное прохождение этого набора тестов означает, что систему можно безопасно развернуть.
2. Написание окончательной версии кода, достаточно несвязанной, чтобы этот код можно было тестировать и подвергать рефакторингу.
3. Формирование чрезвычайно короткого цикла обратной связи, который позволяет поддерживать стабильный ритм и производительность при написании программы.
4. Создание тестов и производственного кода, которые не связаны в такой степени, что их удобно обслуживать и ничто не препятствует репликации вносимых в них изменений.

Практика TDD сводится к соблюдению трех законов, практически полностью состоящих из произвольной части. Отсутствие обязательной части подтверждает, например, тот факт, что конечная цель может достигаться разными средствами. В частности, с помощью предложенной Кентом Беком практики test && commit || revert (TCR). Несмотря на свою непохожесть на TDD, TCR позволяет получить точно такие же результаты.

**Первый закон**

Не пишите код, пока не напишете первый тест.

Опытному программисту этот закон может показаться глупым. У вас тоже, скорее всего, возник вопрос, как написать тест без кода, который следует протестировать. Это естественная реакция, ведь считается, что сначала пишется код, а только потом тесты для него. Но если вдуматься, то само знание того, как должен работать код, позволяет написать для него тест. Хотя, конечно, эта идея контринтуитивна и кажется совершенно нелогичной.


**Второй закон**

Пишите минимальный тест, который не будет пройден.

Добейтесь его прохождения, написав необходимый код. Опытный программист сразу поймет, что первая же строка теста вызовет сбой компиляции, ведь она предполагает взаимодействие с кодом, которого пока не существует. Фактически это означает невозможность написать тест, состоящий более чем из одной строки, так как вам сразу придется переключиться на написание производственного кода.


**Третий закон**

Ограничьтесь минимальным количеством кода, необходимым для прохождения текущего теста. После этого сразу пишите следующий тест.

Эти три закона вовлекают вас в цикл продолжительностью всего несколько секунд. В утрированном виде процесс выглядит примерно так:

•вы пишете строку тестового кода, и этот тест, конечно же, не проходит;

•вы пишете строку производственного кода, позволяющую пройти тест;

•вы пишете следующую строку тестового кода, и тест снова не проходит;

•вы пишете следующий рабочий код, позволяющий пройти тест;

•вы пишете еще одну-две строки тестового кода и обнаруживаете, что проверка утверждения не пройдена;

•вы пишете еще одну-две строки производственного кода, обеспечивающие положительный результат проверки утверждения.



Рефакторинг выполняется постоянно. В каждом цикле TDD происходит очистка кода.
Рефакторинг не меняет поведение. Он проводится только в случаях, когда выполняются все тесты, причем в процессе рефакторинга тесты продолжают успешно выполняться.
Рефакторинг никогда не фигурирует в расписании или плане. На него не нужно отдельно выделять время или спрашивать разрешения. Вы просто все время его делаете.